# Level 1 Data Flow Diagram

The wiki for this data flow model can be found [here](https://github.com/SENG-350-2024-fall/Team-1/wiki/Data-Flow-Models#level-1-data-flow-diagram).

You can view an interactive version of the Level 1 DFD at the following link: [Lucidchart Level 1 DFD](https://lucid.app/lucidchart/9d4f7fd4-4eec-4c30-9fb9-71747bbe0444/edit?viewport_loc=-48%2C155%2C3325%2C1962%2C0_0&invitationId=inv_a645bf0d-d818-476a-9286-1a64e404384a)

The Level 1 Data Flow Diagram for the MisterED system expands on the core processes from the Level 0 DFD, breaking them down into more detailed subprocesses and illustrating how data flows from the databases and actors to the subprocesses, and between the subprocesses themselves.

![Level 1 DFD](https://github.com/user-attachments/assets/6d831501-3e74-4a80-8d59-5c17a5fad85e)

## Processes & Subprocesses

**1.0 - User Authentication & Account Management**
 - **1.1 - Register Patient Account**
 > This subprocess allows patients to create or register a new account within the MisterED system with their existing BC Service Card information. The patient will sign into their BC Service Card account which will provide the system with synchronized medical records. They can also provide any additional personal information (address, phone number, etc.) to be added to their profile. Upon successful registration, the system confirms the patient's account creation and stores their details in the Patient Personal Database.
 - **1.2 - Patient Login**
 > This subprocess manages user authentication by using the BC Service Card application on their device as the verification step. The patient will select to login with their BC Service Card account and get redirected to login in the 3rd party application. Upon successful login they will be redirected back to the MisterED application and their personal profile data is retrieved from the Patient Personal Database, landing them on the logged-in dashboard.
 - **1.3 - Update Patient Profile**  
 > This subprocess allows patients to update their personal information. The patient submits the updated profile fields (address, phone number, etc.), which is sent to the Patient Profile Database. The system will confirm the profile updates and store the changes in the Patient Personal Database, then display a success indicator once the database has saved the changes.
 - **1.4 - Submit Symptoms for Triage**  
 > This subprocess allows patients to input their symptoms for virtual triage. The patient will select Undergo Virtual Triage and be prompted to input their symptoms. The symptom data is submitted by the patient and then outputted for the Online Nurse to evaluate.

**2.0 - Virtual Patient Triage Management**
 - **2.1 - Employee MFA Login**
 > This subprocess handles employee login using authorized devices as the source for the MFA login, ensuring only authorized staff will be able to utilize the MisterED staff features. Staff will submit their credentials, which are verified within the System Database, and then receive a MFA push notification. Upon successful authentication staff are granted access to the MisterED system and land on their dashboard.
 - **2.2 - Virtual Patient Triage**
 > This subprocess enables the Online Nurses to evaluate patient symptoms and generate a triage report. If there are life-threatening or critically severe symptoms detected by the system the triage evaluation will be escalated to the Online Nurse for immediate attention. The symptom data from the patient input and their personal medical records will be provided for this subprocess, and the resulting output is a triage report generated by the Online Nurse. This triage report will be provided to the patient along with follow-up treatment directions given by the Online Nurse, and the triage report will be sent along to the next subprocess. From the results of the triage process the Online Nurse will place the patient in an ED queue as well.
 - **2.3 - Update Triage Report**
 > This subprocess allows employees to update a patient's triage report at different stages of the triage/treatment processes. Triage reports may change based on new medical information, a change in the patient's condition, or if a more accurate evaluation is conducted. An updated triage report will also require the employee that submits the report to update the patient's position in the ED queue. The new patient triage report will replace the current one and be labelled as the most recent report, while older reports will be stored for data thoroughness. Triage reports will be included in the medical records that are submitted after the patient receives treatment.
 - **2.4 - Alert First Responder**
 > If the Online Nurse determines that the patient's symptoms are severe enough that they require assistance or immediate medical attention, the Online Nurse can escalate the patient's case to the care of the First Responders. The First Responder will be notified that there is a patient requiring medical attention and be provided their triage report and their GPS location. During the First Responder assessment they can also provide an updated triage report with a more accurate evaluation, and they will also indicate to a given ED that they are bringing in a high-priority patient.

**3.0 - ED & Queue Information**
 - **3.1 - ED Information**
 > This subprocess allows users and employees alike to view the information of the selected ED. This includes the ED location and the current ED wait time. The wait time is calculated given the current length of the queue for that ED, and if a patient is currently in the queue they will be able to view their estimated wait time given their queue position. 
 - **3.2 - ED Queue Management**
 > This subprocess allows the employee when updating a triage report to place the patient in an ED queue given their report results. Doctors and Nurses in the ED are able to add walk-in patients to the ED based on their triage (see subprocess 4.1). Doctors and Nurses are also able to remove patients from a queue manually when they begin to treat them. ED wait times will be updated when the queue is updated. Patients who have been placed in a queue are also able to remove themselves from the queue as long as their symptoms have not been flagged as severe. 
 - **3.3 - Visit ED Notification**
 > This subprocess notifies the patient when they have reached the front five positions of the ED queue. This intakes the ED queues and then sends the patient a push notification.

**4.0 - Patient Treatment**
 - **4.1 - Walk-In Patient Triage**
 > This subprocess allows Doctors and Nurses to triage patients who have walked into the ED without using the MisterED virtual triage beforehand. Their triage report will be generated and they will be added to the ED queue of the ED they have visited.
 - **4.2 - Patient Treatment**
 > This subprocess allows Doctors and Nurses to 
 - **4.3 - Update Medical Records**
 - **4.4 - First Responder go to Patient Location**

**5.0 - System Maintenance**
 - **5.1 - System Update**
 - **5.2 - Data Backup**
 - **5.3 - IT Support**